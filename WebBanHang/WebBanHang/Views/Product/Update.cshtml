@model WebBanHang.Models.Product
@using Microsoft.AspNetCore.Mvc.Rendering
@{
    ViewData["Title"] = "Edit Product";
}

<div class="container mt-4 mb-5">
    <h2 class="mb-4 fw-bold">Edit eBook</h2>

    <form asp-action="Update" method="post" enctype="multipart/form-data">
        <input type="hidden" asp-for="Id" />

        <!-- ========== BASIC INFORMATION ========== -->
        <div class="card mb-4 shadow-sm border-0">
            <div class="card-header bg-light">
                <h5 class="mb-0">Basic Information</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label asp-for="Name" class="form-label fw-bold">Book Title</label>
                    <input asp-for="Name" class="form-control" placeholder="Enter eBook title..." />
                    <span asp-validation-for="Name" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="CategoryId" class="form-label fw-bold">Category</label>
                    <select asp-for="CategoryId" asp-items="@ViewBag.Categories" class="form-select">
                        <option value="">-- Select category --</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label asp-for="Description" class="form-label fw-bold">Description</label>
                    <textarea asp-for="Description" rows="5" class="form-control" placeholder="Enter detailed eBook description..."></textarea>
                    <span asp-validation-for="Description" class="text-danger"></span>
                </div>
            </div>
        </div>

        <!-- ========== PRICE & COPYRIGHT ========== -->
        <div class="card mb-4 shadow-sm border-0">
            <div class="card-header bg-light">
                <h5 class="mb-0">Price & Copyright</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label asp-for="Price" class="form-label fw-bold">Price($)</label>
                    <input asp-for="Price" class="form-control" placeholder="Example: 50000" />
                    <span asp-validation-for="Price" class="text-danger"></span>
                </div>
            </div>
        </div>

        <!-- ========== COVER IMAGE ========== -->
        <div class="card mb-4 shadow-sm border-0">
            <div class="card-header bg-light">
                <h5 class="mb-0">eBook Cover Image</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label asp-for="ImageUrl" class="form-label fw-bold">Upload New Cover</label>
                    <input type="file" asp-for="ImageUrl" class="form-control" id="imageInput" />
                </div>
                <div class="mt-3 text-center">
                    <img src="@Model.ImageUrl" alt="Cover Image" id="previewImage" style="max-width:200px; border:1px solid #ddd; border-radius:6px;" />
                    <p class="text-muted small mt-2">Cover preview</p>
                </div>
            </div>
        </div>

        <!-- ========== ACTION BUTTONS ========== -->
        <div class="d-flex justify-content-end">
            <a asp-action="Index" class="btn btn-outline-secondary me-2">Cancel</a>
            <button type="submit" class="btn btn-primary">Update eBook</button>
        </div>
    </form>
</div>

@section Scripts {
    <script>
        // Preview cover image when selecting a new file
        document.getElementById("imageInput").addEventListener("change", function (event) {
            const [file] = event.target.files;
            if (file) {
                document.getElementById("previewImage").src = URL.createObjectURL(file);
            }
        });
    </script>
}
